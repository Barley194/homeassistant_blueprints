blueprint:
  name: Dreame Scheduled Cleaning (Simple or Advanced, with Presence Sensor)
  description: >
    This blueprint lets you automate Dreame robot cleanings
    based on a daily or weekly schedule, with the option to
    include presence checks and a cleaning-state tracking system.
  domain: automation
  source_url: https://raw.githubusercontent.com/Barley194/homeassistant_blueprints/refs/heads/main/Dreame/ENG/3_CleaningAutomation.yaml

  input:
    vacuum_entity:
      name: Dreame Robot
      description: Select your Dreame vacuum.
      selector:
        entity:
          domain: vacuum

    map_camera:
      name: Map
      description: Select the camera that exposes the 'rooms' attribute.
      selector:
        entity:
          domain: camera

    presence_helper:
      name: Presence helper (optional)
      default: ""
      selector:
        entity: {}

    presence_required_value:
      name: Required presence value (optional)
      default: ""

    morning_enabled:
      name: Enable morning schedule
      default: false
      selector:
        boolean: {}

    morning_time:
      name: Morning cleaning time
      default: "08:30:00"
      selector:
        time: {}

    morning_days:
      name: Morning days
      default: []
      selector:
        select:
          options: [mon, tue, wed, thu, fri, sat, sun]
          multiple: true

    morning_preset:
      name: Morning mode
      default: genius
      selector:
        select:
          options:
            - label: Vacuum only
              value: sweeping
            - label: Mop only
              value: mopping
            - label: Vacuum and mop
              value: sweeping_and_mopping
            - label: Mop after vacuum
              value: mopping_after_sweeping
            - label: CleanGenius
              value: genius
            - label: CleanGenius Deep
              value: genius_deep

    morning_rooms:
      name: Morning rooms
      selector:
        entity:
          domain: input_select

    evening_enabled:
      name: Enable evening schedule
      default: false
      selector:
        boolean: {}

    evening_time:
      name: Evening cleaning time
      default: "18:00:00"
      selector:
        time: {}

    evening_days:
      name: Evening days
      default: []
      selector:
        select:
          options: [mon, tue, wed, thu, fri, sat, sun]
          multiple: true

    evening_preset:
      name: Evening mode
      default: genius
      selector:
        select:
          options:
            - label: Vacuum only
              value: sweeping
            - label: Mop only
              value: mopping
            - label: Vacuum and mop
              value: sweeping_and_mopping
            - label: Mop after vacuum
              value: mopping_after_sweeping
            - label: CleanGenius
              value: genius
            - label: CleanGenius Deep
              value: genius_deep

    evening_rooms:
      name: Evening rooms
      selector:
        entity:
          domain: input_select

    blockA_enabled:
      name: Enable block A
      default: false
      selector:
        boolean: {}

    blockA_time:
      name: Block A time
      default: "09:00:00"
      selector:
        time: {}

    blockA_days:
      name: Block A days
      default: []
      selector:
        select:
          options: [mon, tue, wed, thu, fri, sat, sun]
          multiple: true

    blockA_preset:
      name: Block A mod
